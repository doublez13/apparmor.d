# apparmor.d - Full set of apparmor profiles
# Copyright (C) 2025 Alexandre Pujol <alexandre@pujol.io>
# SPDX-License-Identifier: GPL-2.0-only

# Kernel Fusion Driver for AMD GPUs

  abi <abi/4.0>,

  @{sys}/devices/virtual/kfd/kfd/topology/nodes/@{int}/ r,
  @{sys}/devices/virtual/kfd/kfd/topology/nodes/@{int}/properties r,

  @{sys}/devices/virtual/kfd/kfd/dev r,
  @{sys}/devices/virtual/kfd/kfd/topology/ r,
  @{sys}/devices/virtual/kfd/kfd/topology/generation_id r,
  @{sys}/devices/virtual/kfd/kfd/topology/nodes/ r,
  @{sys}/devices/virtual/kfd/kfd/topology/nodes/@{int}/ r,
  @{sys}/devices/virtual/kfd/kfd/topology/nodes/@{int}/caches/@{int}/properties r,
  @{sys}/devices/virtual/kfd/kfd/topology/nodes/@{int}/gpu_id r,
  @{sys}/devices/virtual/kfd/kfd/topology/nodes/@{int}/io_links/@{int}/properties r,
  @{sys}/devices/virtual/kfd/kfd/topology/nodes/@{int}/mem_banks/@{int}/properties r,
  @{sys}/devices/virtual/kfd/kfd/topology/nodes/@{int}/properties r,
  @{sys}/devices/virtual/kfd/kfd/topology/system_properties r,
  @{sys}/devices/virtual/kfd/kfd/uevent r,
  @{sys}/module/amdgpu/initstate r,

  /dev/kfd rw,

  include if exists <abstractions/amdgpu.d>

# vim:syntax=apparmor
